@go.Package { name = "github.com/declix/pkl-declix" }
module declix

import "package://pkg.pkl-lang.org/pkl-go/pkl.golang@0.11.0#/go.pkl"
import "pkl:base"

abstract class Resource { 
    fixed type: String
    fixed id: String
}

/// All resources with missing state should use this class to indicate it
class Missing { }

typealias Content = String | UrlContent | Base64Content | ResourceContent | RenderContent;

class UrlContent {
    fixed type: String = "url"
    url: String
    sha256: String
}

class Base64Content {
    fixed type: String = "base64"
    data: String
}

class ResourceContent {
    fixed type: String = "resource"
    resource: base.Resource
}

abstract class RenderContent {
    fixed type: String = "render"
    abstract function render(): String

    _result: String = render()
    _sha256: String = _result.sha256
}