@go.Package { name = "github.com/declix/pkl-declix/apt" }
abstract module declix.apt

import "package://pkg.pkl-lang.org/pkl-go/pkl.golang@0.11.0#/go.pkl"
import ".../declix.pkl"
import ".../dpkg/dpkg.pkl"

class Package extends declix.Resource {
    fixed type = "apt"
    fixed id = type + ":" + name

    name: String
    state: dpkg.State
    updateBeforeInstall: Boolean = false

}

function install(names: Listing<String>): Listing<declix.Resource> = new Listing {
    for (pkg in names) {
        new Package {
            name = pkg
            state = "installed"
        }
    }
}

function remove(names: Listing<String>): Listing<declix.Resource> = new Listing {
    for (pkg in names) {
        new Package {
            name = pkg
            state = "missing"
        }
    }
}
